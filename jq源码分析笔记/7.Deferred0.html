<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<script src="jQ2.3.js"></script>
<script>

    /**
     * jQuery.extend({
     *  Deferred:function(){}
     *  when:function(){}
     * })
     *
     * $.Deferred() -> $.Callbacks();
     * */
</script>
<script>
    /*var cb = $.Callbacks();
    setTimeout(function(){
        alert(111);
        cb.fire();
    },1000);
    cb.add(function(){alert(222);})*/

    /**
     * resolve done*/
    /* var dfd = $.Deferred();
    setTimeout(function(){
        alert(111);
        dfd.resolve();  //=>fire 完成
    },1000);
    dfd.done(function(){//->add 成功
        alert(222);
    })*/

    /**
     * reject fail*/
    /*var dfd = $.Deferred();
    setTimeout(function(){
        alert(111);
        dfd.reject();  //=>fire 未完成
    },1000);
    dfd.fail(function(){//->add 失败
        alert(222);
    })*/

    /**
     * notify progress**/
    /*var dfd = $.Deferred();
    setTimeout(function(){
        alert(111);
        dfd.notify();       //=>fire
    },1000);
    dfd.progress(function(){//->add 进行时
        alert(222);
    })*/

    /**改写ajax
     * done/fail -> add
     * resolve/reject -> fire
     * **/
    /*$.ajax({
        url:'',
        success:function(){},
        error:function(){}
    });
    $.ajax('url')
            .done(function(){console.log('成功');})/!*=>resolve *!/
            .fail(function(){console.log('失败');});/!*reject*!/*/

  /*  var dfd = $.Deferred();
    setTimeout(function(){
//        alert(111);
        dfd.resolve();  //=>fire 成功
        dfd.reject();  //=>fire 失败
    },1000);
    dfd.done(function(){//->add 成功
        console.log('成功')
    }).fail(function(){console.log('失败')})*/
</script>
</body>
</html>